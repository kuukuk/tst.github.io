<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Push Test</title>
</head>
<body>
  <h2>Push Benachrichtigung senden</h2>
  <button id="pushBtn">Push senden</button>

  <script>
    // Service Worker registrieren
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(() => console.log('SW registriert'))
        .catch(err => console.error('SW Fehler:', err));
    }

    // Permission holen
    async function requestPermission() {
      const permission = await Notification.requestPermission();
      if (permission !== 'granted') {
        alert("Bitte Benachrichtigungen erlauben");
      }
    }

    requestPermission();

    // Button-Funktion
    document.getElementById('pushBtn').addEventListener('click', async () => {
      const registration = await navigator.serviceWorker.ready;

      registration.showNotification("ðŸ”” Test Push", {
        body: "Dies ist eine echte Push-Nachricht",
        icon: "https://cdn-icons-png.flaticon.com/512/1827/1827392.png",
        vibrate: [100, 50, 100],
        tag: "push-demo",
        renotify: true
      });
    });
  </script>
</body>
</html>
